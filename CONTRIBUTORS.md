# Conntributors repors

Make sure to apply Format -> Number -> Plain text to all data.

- Use `PG_HOST=localhost PG_PASS=... ./util_sh/update_contributors.sh` - to get all data, or run next 6 commands manually.
- Use `PG_PASS=... ./util_sh/contributors_and_emails.sh` - it will generate `contributors_and_emails.csv` file, put it on the [first sheet here](https://docs.google.com/spreadsheets/d/1bYL4PHTVfqpByhksNhixegm68aiHZLCokHLX-OYVLHw/edit#gid=468674562).
- Use `PG_PASS=... ./util_sh/contributing_actors.sh` - it will generate `contributing_actors.csv` file, put it on the [second sheet here](https://docs.google.com/spreadsheets/d/1bYL4PHTVfqpByhksNhixegm68aiHZLCokHLX-OYVLHw/edit#gid=1690662570).
- Use `PG_PASS=... ./util_sh/contributing_actors_data.sh` - it will generate `contributing_actors_data.csv` file, put it on the [third sheet here](https://docs.google.com/spreadsheets/d/1bYL4PHTVfqpByhksNhixegm68aiHZLCokHLX-OYVLHw/edit#gid=0).
- Use `PG_PASS=... ./util_sh/k8s_contributors_and_emails.sh` - it will generate `k8s_contributors_and_emails.csv` file, put it on the [forth sheet here](https://docs.google.com/spreadsheets/d/1bYL4PHTVfqpByhksNhixegm68aiHZLCokHLX-OYVLHw/edit#gid=1503846806).
- Use `PG_PASS=... ./util_sh/top_50_k8s_yearly_contributors.sh` - it will generate `top_50_k8s_yearly_contributors.csv` file, put it on the [fifth sheet here](https://docs.google.com/spreadsheets/d/1bYL4PHTVfqpByhksNhixegm68aiHZLCokHLX-OYVLHw/edit#gid=722831071).
- Use `PG_PASS=... ./util_sh/k8s_yearly_contributors_with_50.sh` - it will generate `k8s_yearly_contributors_with_50.csv` file, put it on the [sixth sheet here](https://docs.google.com/spreadsheets/d/1bYL4PHTVfqpByhksNhixegm68aiHZLCokHLX-OYVLHw/edit#gid=947299371).
- Use `` PG_PASS=... PG_HOST=teststats.cncf.io PG_DB=gha runq util_sql/number_of_contributing_actors.sql {{exclude_bots}} "`cat util_sql/exclude_bots.sql`" `` to get the number of K8s contributors.
- Use `` PG_PASS=... PG_HOST=teststats.cncf.io PG_DB=allprj runq util_sql/number_of_contributing_actors.sql {{exclude_bots}} "`cat util_sql/exclude_bots.sql`" `` to get the number of all CNCF contributors.
- Use `ONLY="prometheus opentracing fluentd linkerd grpc coredns containerd rkt cni envoy jaeger notary tuf rook vitess nats opa spiffe spire cloudevents telepresence helm harbor openmetrics tikv cortex buildpacks falco dragonfly etcd virtualkubelet kubeedge brigade crio networkservicemesh openebs opentelemetry thanos flux intoto strimzi kubevirt longhorn chubaofs keda smi argo volcano cnigenie keptn kudo cloudcustodian dex litmuschaos artifacthub kuma parsec bfe crossplane contour operatorframework chaosmesh serverlessworkflow k3s backstage tremor metal3 porter openyurt openservicemesh keylime schemahero cdk8s certmanager openkruise tinkerbell pravega kyverno gitopswg piraeus k8dash athenz kubeovn curiefense distribution ingraind kuberhealthy k8gb trickster emissaryingress wasmedge chaosblade vineyard antrea fluid submariner pixie meshery servicemeshperformance kubevela kubevip kubedl krustlet krator oras wasmcloud akri metallb karmada inclavarecontainers superedge cilium dapr openelb openclustermanagement vscodek8stools nocalhost kubearmor k8up kubers devfile knative fabedge confidentialcontainers openfunction teller sealer clusterpedia opencost aerakimesh curve openfeature kubewarden devstream hexapolicyorchestrator konveyor armada externalsecretsoperator serverlessdevs containerssh openfga kured carvel lima istio merbridge devspace capsule zot paralus carina ko opcr werf kubescape inspektorgadget clusternet" ./util_sh/unique_contributors.sh` to get the number of non-k8s contributors.
- Use `./util_sh/contributors.sh dbname` to get the number of contributors in a given `dbname`.
- `cp contributors_and_emails.csv contributing_actors.csv contributing_actors_data.csv k8s_contributors_and_emails.csv top_50_k8s_yearly_contributors.csv k8s_yearly_contributors_with_50.csv /somewhere/`.
- Or `zip -9 ~/contrib.zip contributors_and_emails.csv contributing_actors.csv contributing_actors_data.csv k8s_contributors_and_emails.csv top_50_k8s_yearly_contributors.csv k8s_yearly_contributors_with_50.csv`

You can run it from the SSH bastion or locally (assuming teststats.cncf.io has whitelisted your local IP). You can also run it from teststats.cncf.io and download CSVs to your computer to put them in google sheet.

# Kubernetes/Helm

- New approach is to use `cncf/devstats-reports`, see [contributors section](https://github.com/cncf/devstats-reports#contributors).
- Test: Create reports pod: `helm install devstats-test-reports ./devstats-helm --set skipSecrets=1,skipPVs=1,skipBackupsPV=1,skipVacuum=1,skipBackups=1,skipBootstrap=1,skipProvisions=1,skipCrons=1,skipAffiliations=1,skipGrafanas=1,skipServices=1,skipPostgres=1,skipIngress=1,skipStatic=1,skipAPI=1,skipNamespaces=1,reportsPod=1,projectsOverride='+cncf\,+opencontainers\,+zephyr\,+linux\,+rkt\,+sam\,+azf\,+riff\,+fn\,+openwhisk\,+openfaas\,+cii\,+prestodb\,+godotengine'`
- Prod: Create reports pod: `helm install devstats-prod-reports ./devstats-helm --set skipSecrets=1,skipPVs=1,skipBackupsPV=1,skipVacuum=1,skipBackups=1,skipBootstrap=1,skipProvisions=1,skipCrons=1,skipAffiliations=1,skipGrafanas=1,skipServices=1,skipPostgres=1,skipIngress=1,skipStatic=1,skipAPI=1,skipNamespaces=1,reportsPod=1,namespace='devstats-prod'`.
- Shell into reports pod: `../devstats-k8s-lf/util/pod_shell.sh devstats-reports` and then run `./contributors/update_contributors.sh`.
- Final zip containing all data in [here](https://teststats.cncf.io/backups/contrib.zip) or [here](https://devstats.cncf.io/backups/contrib.zip) (depending on which environment you run reports pod). Unzip it, and upload corresponding CSV files into google sheet.
- Finally delete reporting pod: `helm delete devstats-test-reports` or `helm delete devstats-prod-reports` (but you can leave it running, it is just sleeping forever waiting for shell connection).
