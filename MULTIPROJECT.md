# Configuration for running multiple projects on single host
- You need to install docker (see instruction for your Linux distro).
- Start 2nd Grafna in a docker containser via `./grafana/docker_grafana_start.sh` (there are also `docker_grafana_stop.sh` and `docker_grafana_shell.sh` scripts)
- Configure Grafana using http:/{{your_domain}}:3001 as described in [GRAFANA.md](https://github.com/cncf/devstats/blob/master/GRAFANA.md), note changes specific to docker listed below:
- InfluxDB name should point to 2nd, 3rd ... project Influx database, for example "prometheus"
- You won't be able to access InfluxDB running on localhost, You need to get host's virtual address from within docker container:
- `./grafana/docker_grafana_shell.sh` and execute: `ip route | awk '/default/ { print $3 }'` to get container's gateway address (our host), for example `172.17.0.1`.
- Use http://{{gateway_ip}}:8086 as InfluxDB url.
- To edit `grafana.ini` config file (to allow anonymous access), you need to use bash shell inside docker container: `./grafana/docker_grafana_shell.sh`:
- There is no text editor in grafana docker image, so you have to copy grafana.ini into a host shared path /var/lib/grafana: `cp /etc/grafana/grafana.ini /var/lib/grafana/`
- Edit file on the host, path on the host would be: `/var/lib/grafana.prometheus/grafana.ini`. Do edits on the host.
- Check if container sees edits: `diff /var/lib/grafana/grafana.ini /etc/grafana/grafana.ini`.
- Move edited file to the right place: `mv /var/lib/grafana/grafana.ini /etc/grafana/grafana.ini` (inside the container).
