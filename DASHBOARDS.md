# Grafana dashboards

This is for Kubernetes project:

Each dashboard is defined by its metrics SQL, saved Grafana JSON export and link to dashboard running on <https://devstats.k8s.io>  

Many dashboards use "Repository group" drop-down. Repository groups are defined manually to group similar repositories into single projects.
They are defined here: [repo_groups.sql](https://github.com/cncf/devstats/blob/master/scripts/kubernetes/repo_groups.sql)

1) Reviewers dashboard: [reviewers.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/reviewers.sql), [reviewers.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/reviewers.json), [view](https://devstats.k8s.io/dashboard/db/reviewers?orgId=1).
2) SIG mentions dashboard: [sig_mentions.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/sig_mentions.sql), [sig_mentions.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/sig_mentions.json), [view](https://devstats.k8s.io/dashboard/db/sig-mentions?orgId=1).
3) SIG mentions breakdown by categories dashboard: [sig_mentions_cats.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/sig_mentions_cats.sql), [sig_mentions_breakdown.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/sig_mentions_breakdown.sql), [sig_mentions_categories.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/sig_mentions_categories.json), [view](https://devstats.k8s.io/dashboard/db/sig-mentions-categories?orgId=1).
4) SIG mentions using labels dashboard: [labels_sig.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/labels_sig.sql), [labels_kind.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/labels_kind.sql), [labels_sig_kind.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/labels_sig_kind.sql), [sig_mentions_using_labels.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/sig_mentions_using_labels.json), [view](https://devstats.k8s.io/dashboard/db/sig-mentions-using-labels?orgId=1).
5) The Number of all PRs merged in all Kubernetes repos, from 2014-06 dashboard [all_prs_merged.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/all_prs_merged.sql), [all_prs_merged.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/all_prs_merged.json), [view](https://devstats.k8s.io/dashboard/db/all-prs-merged?orgId=1).
6) The Number of PRs merged per repository dashboard [prs_merged.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/prs_merged.sql), [prs_merged.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/prs_merged.json), [view](https://devstats.k8s.io/dashboard/db/prs-merged?orgId=1).
7) PRs from opened to merged, from 2014-06 dashboard [opened_to_merged.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/opened_to_merged.sql), [opened_to_merged.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/opened_to_merged.json), [view](https://devstats.k8s.io/dashboard/db/opened-to-merged?orgId=1).
8) PRs from opened to LGTMed, approved and merged dashboard [time_metrics.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/time_metrics.sql), [time_metrics.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/time_metrics.json), [view](https://devstats.k8s.io/dashboard/db/time-metrics?orgId=1).
9) PR Comments dashboard [pr_comments.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/pr_comments.sql), [pr_comments.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/pr_comments.json), [view](https://devstats.k8s.io/dashboard/db/pr-comments?orgId=1).
10) Companies velocity dashboard [company_activity.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/company_activity.sql), [companies_velocity.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/companies_velocity.json), [view](https://devstats.k8s.io/dashboard/db/companies-velocity?orgId=1).
11) Companies stats dashboard [company_activity.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/company_activity.sql), [companies_stats.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/companies_stats.json), [view](https://devstats.k8s.io/dashboard/db/companies-stats?orgId=1).
12) The Number of PRs merged per repository groups dashboard [prs_merged_groups.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/prs_merged_groups.sql), [prs_merged_repository_groups.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/prs_merged_repository_groups.json), [view](https://devstats.k8s.io/dashboard/db/prs-merged-repository-groups?orgId=1).
13) Reviewers histogram dashboard: [hist_reviewers.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/hist_reviewers.sql), [reviewers_histogram.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/reviewers_histogram.json), [view](https://devstats.k8s.io/dashboard/db/reviewers-histogram?orgId=1).
14) Repository comments dashboard: [repo_comments.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/repo_comments.sql), [repository_comments.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/repository_comments.json), [view](https://devstats.k8s.io/dashboard/db/repository-comments?orgId=1).
15) Repository unique commenters dashboard: [repo_commenters.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/repo_commenters.sql), [repository_commenters.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/repository_commenters.json), [view](https://devstats.k8s.io/dashboard/db/repository-commenters?orgId=1).
16) New PRs dashboard: [new_prs.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/new_prs.sql), [new_prs.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/new_prs.json), [view](https://devstats.k8s.io/dashboard/db/new-prs?orgId=1).
17) PRs unique authors dashboard: [prs_authors.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/prs_authors.sql), [prs_authors.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/prs_authors.json), [view](https://devstats.k8s.io/dashboard/db/prs-authors?orgId=1).
18) Opened PRs age/count dashboard: [prs_age.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/prs_age.sql), [prs_age.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/prs_age.json), [view](https://devstats.k8s.io/dashboard/db/prs-age?orgId=1).
19) Top commenters dashboard: [hist_commenters.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/hist_commenters.sql), [top_commenters.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/top_commenters.json), [view](https://devstats.k8s.io/dashboard/db/top-commenters?orgId=1).
20) Community stats dashboard: [watchers.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/watchers.sql), [community_stats.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/community_stats.json), [view](https://devstats.k8s.io/dashboard/db/community-stats?orgId=1).
21) First non-author activity dashboard: [first_non_author_activity.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/first_non_author_activity.sql), [first_non_author_activity.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/first_non_author_activity.json), [view](https://devstats.k8s.io/dashboard/db/first-non-author-activity?orgId=1).
22) Bot commands usage dashboard: [bot_commands.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/bot_commands.sql), [bot_commands.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/bot_commands.json), [view](https://devstats.k8s.io/dashboard/db/bot-commands?orgId=1).
23) Contributing companies dashboard: [num_stats.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/num_stats.sql), [contributing_companies.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/contributing_companies.json), [view](https://devstats.k8s.io/dashboard/db/contributing-companies?orgId=1).
24) Approvers dashboard: [approvers.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/approvers.sql), [approvers.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/approvers.json), [view](https://devstats.k8s.io/dashboard/db/approvers?orgId=1).
25) Approvers histogram dashboard: [hist_approvers.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/hist_approvers.sql), [approvers_histogram.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/approvers_histogram.json), [view](https://devstats.k8s.io/dashboard/db/approvers-histogram?orgId=1).
26) SIG issues dashboard: [labels_sig_kind.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/labels_sig_kind.sql), [labels_sig_kind_closed.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/labels_sig_kind_closed.sql), [sig_issues.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/sig_issues.json), [view](https://devstats.k8s.io/dashboard/db/sig-issues?orgId=1).
27) Issues repository group dashboard: [issues_opened.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/issues_opened.sql), [issues_closed.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/issues_closed.sql), [issues_repository_groups.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/issues_repository_groups.json), [view](https://devstats.k8s.io/dashboard/db/issues-repository-group?orgId=1).
28) PRs approval dashboard: [prs_state.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/prs_state.sql), [prs_approval.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/prs_approval.json), [view](https://devstats.k8s.io/dashboard/db/prs-approval?orgId=1).
29) PRs approval stacked dashboard: [prs_state.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/prs_state.sql), [prs_approval_stacked.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/prs_approval_stacked.json), [view](https://devstats.k8s.io/dashboard/db/prs-approval-stacked?orgId=1).
30) PRs authors histogram dashboard: [hist_pr_authors.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/hist_pr_authors.sql), [prs_authors_histogram.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/prs_authors_histogram.json), [view](https://devstats.k8s.io/dashboard/db/prs-authors-histogram?orgId=1).
31) PRs authors companies histogram dashboard: [hist_pr_companies.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/hist_pr_companies.sql), [prs_authors_companies_histogram.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/prs_authors_companies_histogram.json), [view](https://devstats.k8s.io/dashboard/db/prs-authors-companies-histogram?orgId=1).
32) Blocked dashboard: [prs_blocked.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/prs_blocked.sql), [blocked_prs.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/blocked_prs.json), [view](https://devstats.k8s.io/dashboard/db/blocked-prs?orgId=1).
33) Need rebase PRs dashboard: [prs_rebase.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/prs_rebase.sql), [need_rebase_prs.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/need_rebase_prs.json), [view](https://devstats.k8s.io/dashboard/db/need-rebase-prs?orgId=1).
34) All need rebase PRs dashboard: [all_prs_rebase.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/all_prs_rebase.sql), [all_need_rebase_prs.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/all_need_rebase_prs.json), [view](https://devstats.k8s.io/dashboard/db/all-need-rebase-prs?orgId=1).
35) Issues age dashboard: [issues_age.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/issues_age.sql), [issues_age.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/issues_age.json), [view](https://devstats.k8s.io/dashboard/db/issues-age?orgId=1).
36) Suggested approvers dashboard [other_approver.sql](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/other_approver.sql), [suggested_approvers.json](https://github.com/cncf/devstats/blob/master/grafana/dashboards/kubernetes/suggested_approvers.json), [view](https://devstats.k8s.io/dashboard/db/suggested-approvers?orgId=1).

All of them works live on [devstats.k8s.io](https://devstats.k8s.io) with auto `gha2db_sync` tool running.

Dashboard definitions are read from YAML file:  [metrics/kubernetes/metrics.yaml](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/metrics.yaml)

If dashboard needs an additional preprocessing (filling gaps with zeros), then it must be listed in this YAML file:  [metrics/kubernetes/gaps.yaml](https://github.com/cncf/devstats/blob/master/metrics/kubernetes/gaps.yaml).

See [adding new metrics](https://github.com/cncf/devstats/blob/master/METRICS.md) for details.

Similar set of metrics is defined for Prometheus:

SQL metris in `metrics/prometheus/` directory, Iflux templates/tags `metrics/prometheus/*tags*.sql` files. Prometheus dashboards: `grafana/dashboards/prmetheus/` directory.
